
CREATE TABLE category_name_translation (
	product_category_name TEXT, 
	product_category_name_english TEXT
)

/*
3 rows from category_name_translation table:
product_category_name	product_category_name_english
beleza_saude	health_beauty
informatica_acessorios	computers_accessories
automotivo	auto
*/


CREATE TABLE customers (
	customer_id TEXT NOT NULL, 
	customer_unique_id TEXT NOT NULL, 
	customer_zip_code_prefix BIGINT, 
	customer_city TEXT, 
	customer_state TEXT, 
	CONSTRAINT customers_pkey PRIMARY KEY (customer_id)
)

/*
Column Comments: {'customer_id': 'key to the orders dataset. Each order has a unique customer_id', 'customer_unique_id': 'unique identifier of a customer', 'customer_zip_code_prefix': 'first five digits of customer zip code'}
*/

/*
3 rows from customers table:
customer_id	customer_unique_id	customer_zip_code_prefix	customer_city	customer_state
06b8999e2fba1a1fbc88172c00ba8bc7	861eff4711a542e4b93843c6dd7febb0	14409	franca	SP
18955e83d337fd6b2def6b18a428ac77	290c77bc529b7ac935b93aa66c333dc3	9790	sao bernardo do campo	SP
4e7b3e00288586ebd08712fdd0374a03	060e732b5b29e8181a18229c7b0b2b5e	1151	sao paulo	SP
*/


CREATE TABLE geolocation (
	geolocation_zip_code_prefix BIGINT NOT NULL, 
	geolocation_lat DOUBLE PRECISION, 
	geolocation_lng DOUBLE PRECISION, 
	geolocation_city TEXT, 
	geolocation_state TEXT, 
	id BIGINT GENERATED BY DEFAULT AS IDENTITY (INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 NO CYCLE)
)

/*
Column Comments: {'geolocation_zip_code_prefix': 'first 5 digits of zip code', 'geolocation_lat': 'latitude', 'geolocation_lng': 'longitude'}
*/

/*
3 rows from geolocation table:
geolocation_zip_code_prefix	geolocation_lat	geolocation_lng	geolocation_city	geolocation_state	id
1037	-23.5456212811527	-46.6392920480017	sao paulo	SP	1
1046	-23.5460811270355	-46.6448202983716	sao paulo	SP	2
1046	-23.5461289664147	-46.6429514836114	sao paulo	SP	3
*/


CREATE TABLE order_items (
	order_id TEXT NOT NULL, 
	order_item_id BIGINT NOT NULL, 
	product_id TEXT NOT NULL, 
	seller_id TEXT NOT NULL, 
	shipping_limit_date TIMESTAMP WITH TIME ZONE, 
	price DOUBLE PRECISION, 
	freight_value DOUBLE PRECISION, 
	CONSTRAINT order_items_pkey PRIMARY KEY (order_id, order_item_id, product_id, seller_id), 
	CONSTRAINT order_items_order_id_fkey FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE ON UPDATE CASCADE, 
	CONSTRAINT order_items_product_id_fkey FOREIGN KEY(product_id) REFERENCES products (product_id) ON DELETE CASCADE ON UPDATE CASCADE, 
	CONSTRAINT order_items_seller_id_fkey FOREIGN KEY(seller_id) REFERENCES sellers (seller_id) ON DELETE CASCADE ON UPDATE CASCADE
)

/*
Column Comments: {'order_id': 'order unique identifier', 'order_item_id': 'sequential number identifying number of items included in the same order.', 'product_id': 'product unique identifier', 'seller_id': 'seller unique identifier', 'shipping_limit_date': 'Shows the seller shipping limit date for handling the order over to the logistic partner.', 'freight_value': 'item freight value item (if an order has more than one item the freight value is splitted between items)'}
*/

/*
3 rows from order_items table:
order_id	order_item_id	product_id	seller_id	shipping_limit_date	price	freight_value
00010242fe8c5a6d1ba2dd792cb16214	1	4244733e06e7ecb4970a6e2683c13e61	48436dade18ac8b2bce089ec2a041202	2017-09-19 09:45:35+00:00	58.9	13.29
00018f77f2f0320c557190d7a144bdd3	1	e5f2d52b802189ee658865ca93d83a8f	dd7ddc04e1b6c2c614352b383efe2d36	2017-05-03 11:05:13+00:00	239.9	19.93
000229ec398224ef6ca0657da4fc703e	1	c777355d18b72b67abbeef9df44fd0fd	5b51032eddd242adc84c38acab88f23d	2018-01-18 14:48:30+00:00	199.0	17.87
*/


CREATE TABLE order_payments (
	order_id TEXT NOT NULL, 
	payment_sequential BIGINT NOT NULL, 
	payment_type TEXT, 
	payment_installments BIGINT, 
	payment_value DOUBLE PRECISION, 
	CONSTRAINT payments_pkey PRIMARY KEY (order_id, payment_sequential), 
	CONSTRAINT order_payments_order_id_fkey FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE ON UPDATE CASCADE
)

/*
Column Comments: {'order_id': 'unique identifier of an order.', 'payment_sequential': 'a customer may pay an order with more than one payment method. If he does so, a sequence will be created to', 'payment_type': 'method of payment chosen by the customer.', 'payment_installments': 'number of installments chosen by the customer.', 'payment_value': 'transaction value.'}
*/

/*
3 rows from order_payments table:
order_id	payment_sequential	payment_type	payment_installments	payment_value
b81ef226f3fe1789b1e8b2acac839d17	1	credit_card	8	99.33
a9810da82917af2d9aefd1278f1dcfa0	1	credit_card	1	24.39
25e8ea4e93396b6fa0d3dd708e76c1bd	1	credit_card	1	65.71
*/


CREATE TABLE order_reviews (
	review_id TEXT NOT NULL, 
	order_id TEXT NOT NULL, 
	review_score BIGINT, 
	review_comment_title TEXT, 
	review_comment_message TEXT, 
	review_creation_date TIMESTAMP WITH TIME ZONE, 
	review_answer_timestamp TIMESTAMP WITH TIME ZONE, 
	CONSTRAINT order_reviews_pkey PRIMARY KEY (review_id, order_id), 
	CONSTRAINT order_reviews_order_id_fkey FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE ON UPDATE CASCADE
)

/*
3 rows from order_reviews table:
review_id	order_id	review_score	review_comment_title	review_comment_message	review_creation_date	review_answer_timestamp
7bc2406110b926393aa56f80a40eba40	73fc7af87114b39712e6da79b0a377eb	4			2018-01-18 00:00:00+00:00	2018-01-18 21:46:59+00:00
80e641a11e56f04c1ad469d5645fdfde	a548910a1c6147796b98fdf73dbeba33	5			2018-03-10 00:00:00+00:00	2018-03-11 03:05:13+00:00
228ce5500dc1d8e020d8d1322874b6f0	f9e4b658b201a9f2ecdecbb34bed034b	5			2018-02-17 00:00:00+00:00	2018-02-18 14:36:24+00:00
*/


CREATE TABLE orders (
	order_id TEXT NOT NULL, 
	customer_id TEXT, 
	order_status TEXT, 
	order_purchase_timestamp TIMESTAMP WITH TIME ZONE, 
	order_approved_at TEXT, 
	order_delivered_carrier_date TEXT, 
	order_delivered_customer_date TEXT, 
	order_estimated_delivery_date TIMESTAMP WITH TIME ZONE, 
	CONSTRAINT orders_pkey PRIMARY KEY (order_id), 
	CONSTRAINT orders_customer_id_fkey FOREIGN KEY(customer_id) REFERENCES customers (customer_id) ON DELETE RESTRICT ON UPDATE CASCADE
)

/*
Column Comments: {'order_id': 'unique identifier of the order.', 'customer_id': 'key to the customer dataset. Each order has a unique customer_id.', 'order_status': 'Reference to the order status (delivered, shipped, etc).', 'order_purchase_timestamp': 'Shows the purchase timestamp.', 'order_approved_at': 'Shows the payment approval timestamp.', 'order_delivered_carrier_date': 'Shows the order posting timestamp. When it was handled to the logistic partner.', 'order_delivered_customer_date': 'Shows the actual order delivery date to the customer.', 'order_estimated_delivery_date': 'Shows the estimated delivery date that was informed to customer at the purchase moment.'}
*/

/*
3 rows from orders table:
order_id	customer_id	order_status	order_purchase_timestamp	order_approved_at	order_delivered_carrier_date	order_delivered_customer_date	order_estimated_delivery_date
e481f51cbdc54678b7cc49136f2d6af7	9ef432eb6251297304e76186b10a928d	delivered	2017-10-02 10:56:33+00:00	2017-10-02 11:07:15	2017-10-04 19:55:00	2017-10-10 21:25:13	2017-10-18 00:00:00+00:00
53cdb2fc8bc7dce0b6741e2150273451	b0830fb4747a6c6d20dea0b8c802d7ef	delivered	2018-07-24 20:41:37+00:00	2018-07-26 03:24:27	2018-07-26 14:31:00	2018-08-07 15:27:45	2018-08-13 00:00:00+00:00
47770eb9100c2d0c44946d9cf07ec65d	41ce2a54c0b03bf3443c3d931a367089	delivered	2018-08-08 08:38:49+00:00	2018-08-08 08:55:23	2018-08-08 13:50:00	2018-08-17 18:06:29	2018-09-04 00:00:00+00:00
*/


CREATE TABLE products (
	product_id TEXT NOT NULL, 
	product_category_name TEXT, 
	product_name_lenght BIGINT, 
	product_description_lenght BIGINT, 
	product_photos_qty BIGINT, 
	product_weight_g BIGINT, 
	product_length_cm BIGINT, 
	product_height_cm BIGINT, 
	product_width_cm BIGINT, 
	CONSTRAINT products_pkey PRIMARY KEY (product_id)
)

/*
Column Comments: {'product_id': 'unique product identifier', 'product_category_name': 'root category of product, in Portuguese.', 'product_name_lenght': 'number of characters extracted from the product name.', 'product_description_lenght': 'number of characters extracted from the product description.', 'product_photos_qty': 'number of product published photos', 'product_weight_g': 'product weight measured in grams.', 'product_length_cm': 'product length measured in centimeters.', 'product_height_cm': 'product height measured in centimeters.', 'product_width_cm': 'product width measured in centimeters.'}
*/

/*
3 rows from products table:
product_id	product_category_name	product_name_lenght	product_description_lenght	product_photos_qty	product_weight_g	product_length_cm	product_height_cm	product_width_cm
1e9e8ef04dbcff4541ed26657ea517e5	perfumaria	40	287	1	225	16	10	14
3aa071139cb16b67ca9e5dea641aaa2f	artes	44	276	1	1000	30	18	20
96bd76ec8810374ed1b65e291975717f	esporte_lazer	46	250	1	154	18	9	15
*/


CREATE TABLE sellers (
	seller_id TEXT NOT NULL, 
	seller_zip_code_prefix BIGINT, 
	seller_city TEXT, 
	seller_state TEXT, 
	CONSTRAINT sellers_pkey PRIMARY KEY (seller_id)
)

/*
Column Comments: {'seller_id': 'seller unique identifier', 'seller_zip_code_prefix': 'first 5 digits of seller zip code'}
*/

/*
3 rows from sellers table:
seller_id	seller_zip_code_prefix	seller_city	seller_state
3442f8959a84dea7ee197c632cb2df15	13023	campinas	SP
d1b65fc7debc3361ea86b5f14c68d2e2	13844	mogi guacu	SP
ce3ad9de960102d0677a81f5d0bb7b2d	20031	rio de janeiro	RJ
*/