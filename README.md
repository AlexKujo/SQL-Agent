### SQL Agent (WIP)

Небольшой pet‑проект по созданию SQL‑агента, который понимает запросы на естественном языке, работает со схемой БД и формирует безопасные SQL‑запросы. Проект на ранней стадии разработки.

### Что уже есть
- **Извлечение и построение схемы**: заготовки для парсинга/генерации схем (`rag/classes/db_schema_extractor.py`, `rag/classes/db_schema_builder.py`).
- **RAG-слой для SQL**: прототипы поиска по документации/схеме в `rag/`.
- **Эксперименты**: скрипты `rag/langchain_sql_test.py`, `rag/mcp_test.py`, `rag/doc.py`.

### Планы
- **Агентный пайплайн NL → Ответ**:
  - Получать запрос пользователя.
  - Решать, требуется ли информация из Postgres.
    - Если да:
      - Делать векторный поиск по схеме БД, выбирать релевантные таблицы.
      - Генерировать SQL‑запрос, выполнять его и валидировать результат.
      - При неверном/неполном результате — перегенерировать и повторять, пока не получим нужную информацию или корректный запрос.
      - Анализировать ответ и формулировать вывод для пользователя.
    - Если нет:
      - Выбирать стратегию: RAG по внутренним документам, веб‑поиск или комбинированно — в зависимости от запроса.
- **Мульти‑источники в одном ответе**: объединять результаты из БД, RAG и интернета с указанием источников.
- **Простой веб‑интерфейс**: форма ввода, просмотр цепочки решений, предпросмотр SQL и источников.

### Текущий статус
- Активная разработка, API и структура могут меняться.
- Репозиторий публикуется для отслеживания прогресса и обратной связи.

